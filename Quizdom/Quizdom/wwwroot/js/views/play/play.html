<div id="player-card">
  <div class="row">
    <div class="col s12">
      <div class="card blue darken-2">
        <div class="card-content white-text">
          <span class="card-title center-align">Play Quizdom</span>
          <div class="row">
            <div class="col s12">
              <!-- Welcome to the game and rules -->
              <div class="card grey-text text-darken-4" id='welcome' ng-show="vm.showMe('welcome')" ng-click="vm.triggerPlay()">
                <div class="card-content">
                  <span class="card-title center-align">How to play</span>
                  <ol>
                    <li>Active player picks a question</li>
                    <li>A question with 4 answers is shown</li>
                    <li>Every player tries to pick the correct answer</li>
                    <li>The player who answers correctly & quickest is awarded prize points then gets to pick next question</li>
                    <li>If nobody answers correctly the last active player picks again</li>
                    <li>When all questions answered, player with the most prize points wins!</li>
                  </ol>

                </div>

              </div>
              <!-- category titles -->
              <div class="row" id="categories" ng-show="vm.showMe('pick')">
                <div class="col" ng-class="vm.GameService.gameCatClass" ng-repeat="cat in vm.GameService.gameCategories">
                  <div class="card-panel blue darken-4">
                    <span class="card-title center-align">{{cat.shortDescription}}</span>
                  </div>
                </div>
              </div>
              <!-- hidden section that appears to prepare players for question 3 sec countdown -->
              <div class="card grey-text text-darken-4" id='prepare' ng-show="vm.showMe('prepare')">
                <div class="card-content center-align">
                  <span class="card-title">{{ vm.GameService.question.catLong }}</span>
                  <span>Get ready to answer</span>
                  <h1>{{ timer }}</h1>
                </div>
              </div>
              <!-- hidden section that appears to display question & answers -->
              <div class="card grey-text text-darken-4" id='answer' ng-show="vm.showMe('answer')">
                <div class="card-content">
                  <!-- questionId, questionText, answers -->
                  <span class="card-title">{{ vm.GameService.question.questionId }}. {{vm.GameService.question.questionText}}</span>
                  <div class="row" ng-repeat="answer in [vm.GameService.question.answerA, vm.GameService.question.answerB, vm.GameService.question.answerC, vm.GameService.question.answerD]">
                    <div class="col s12">
                      <div class="card" ng-class="vm.answerClass($index)" ng-click="vm.triggerGuess($index)">
                        <div class="card-content" value={{$index}}>
                          <span>{{ "ABCD"[$index] }}. {{answer}}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <h6>{{ vm.Authentication.User.userName }} time to answer: {{ timer }} seconds</h6>
                  <h6>Answer: {{ vm.GameService.guess }} Delay: {{ vm.GameService.endTime - vm.GameService.startTime }}</h6>
                </div>
              </div>
              <!-- hidden section that appears to display results -->
              <div class="card grey-text text-darken-4" id='results' ng-show="vm.showMe('results')">
                <div class="card-content">
                  <!-- questionId, questionText, answers -->
                  <span class="card-title">{{ vm.GameService.question.questionId }}. {{vm.GameService.question.questionText}}</span>
                  <div class="row" ng-repeat="answer in [vm.GameService.question.answerA, vm.GameService.question.answerB, vm.GameService.question.answerC, vm.GameService.question.answerD]"
                    ng-show="$index == vm.GameService.question.correctAnswer">
                    <div class="col s12">
                      <div class="card green darken-3 white-text">
                        <div class="card-content valign-wrapper" value={{$index}}>
                          <span class="">{{ "ABCD"[$index] }}. {{answer}}
                            <a class="btn green darken-4"><i class="material-icons left">check</i>Correct</a>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col s4" ng-repeat="player in vm.GameService.players">
                      <div class="card">
                        <div class="card-content">
                          <div class="chip" tag={{player.userName}} id={{player.playerId}}>
                            <img src="/images/{{player.avatarUrl}}" alt="player">
                            <div class="valign-wrapper">{{player.userName}}</div>
                          </div>
                          <div>
                            <p>Guess: {{ vm.guessValue[player.answer] }}<i class="material-icons right">{{ player.answer == vm.GameService.question.correctAnswer ? "check" : "close" }}</i></p>
                            <p>Time: {{ player.delay/1000 }} s</p>
                            <p>{{ player.answer == vm.GameService.question.correctAnswer ? "check" : "close" }}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>s
                </div>
              </div>
              <!-- 3 rows of 6 columns of gameBoards AKA questions showing prizePoints -->
              <div class="row" ng-repeat="row in [0,1,2]" id='pick' ng-show="vm.showMe('pick')">
                <div class="game-question col s4 m2" ng-repeat="gb in vm.GameService.gameBoards | filter: {boardRow:row}">
                  <div class="card" ng-class="vm.gameBoardClass(gb)" ng-click="vm.triggerPrepare(gb.id)">
                    <div class="center-align">
                      <i class="large material-icons">live_help</i>
                      <!-- <img src="/images/avatar_generic.png"> -->
                    </div>
                    <div class="card-content">
                      <span class="center-align">
                      <h5 class="">{{ gb.prizePoints }}</h5>
                      <!-- <p class="">R{{ q.boardRow }} C{{ q.boardColumn }}:</p> -->
                      <!-- <p class="">{{ q.categoryId }}-{{ q.difficulty.substring(0,4) }}</p> -->
                      <!-- <span class="">{{ q.difficulty }}</span> -->
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Game players -->
          <p>Active player: {{ vm.GameService.gameData.activeUserId }}</p>
          <div class="row">
            <div ng-repeat="player in vm.GameService.players">
              <qz-player player="player"></qz-player>
            </div>
          </div>

          <!-- chat view embedded -->
          <div class="row">
            <div class="col s12 offset-m1 m10">
              <ul id="gameMessages">
                <li ng-repeat="msg in vm.GameService.gameChats | limitTo : -5">
                  <span ng-show='vm.showDate' style="font-size: smaller; color: gray;">{{msg.timestamp | date : 'yyyy/MM/dd hh:mm:ss'}}&nbsp;</span>
                  <span>{{msg.userName}}: {{msg.content}}</span>
                </li>
              </ul>
              <form class="chat-form row">
                <div class="input-field">
                  <div class="col s8 m9 l10">
                    <input id="textInput" type="text" placeholder="{{vm.AuthenticationService.User.userName}}" />
                  </div>
                  <div class="col s4 m3 l2">
                    <button type="submit" class="btn btn-primary" id="publishPostButton" ng-click="vm.triggerGameMessage()">Send</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="card-action">
            <a class="btn" ui-sref="Invite">Invite</a>
            <a class="btn" ui-sref="Setup">Categories</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    $('select').material_select();
  });
</script>